<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    .wrapper {
      margin: 0 auto;
      max-width: 800px;
      padding: 20px;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <h2>How to make simple transaction with cardano-cli</h2>
    <p>For this to work, first we need to install the cardano-node (pre-prod) and cardano-cli.</p>
    <p>First we need to create payment address. For that we use the following command.</p>
    <pre>
      cardano-cli address key-gen \
        --verification-key-file payment1.vkey \
        --signing-key-file payment1.skey
    </pre>
    <p>This will create two files in the current directory. <em>payment1.vkey</em> is used to create the addrees and
      <em>payment1.skey</em> is used to sign the transactions.
    </p>
    <p>No we need to create the address.</p>
    <pre>
      cardano-cli address build \
        --payment-verification-key-file payment1.vkey \ 
        --out-file payment1.addr \
        --testnet-magic 1
    </pre>
    <p>This will create the <em>payment1.addr</em> file which contains the address that is associated with
      <em>payment1.vkey</em>. And because we are creating this address on the pre-prod testnet, we use
      <em>--testnet-magic 1</em>.
    </p>
    <p>We need to have some test ADA (tADA) in this address to send it elsewhere. For that, open the
      <em>payment1.addr</em> file and copy the address. Then go to <a
        href="https://docs.cardano.org/cardano-testnet/tools/faucet">Testnets Faucet</a>, paste your address there,
      choose the PreProd and
      request your tADA.
    </p>
    <p>If you want to check if the tADAs arrived, you can run the command bellow.</p>
    <pre>
      cardano-cli query utxo  \ 
        --address $(cat payment1.addr) \ 
        --testnet-magic 1
    </pre>
    <p>You will see something like this.</p>
    <pre>
      TxHash                                                             TxIx       Amount
      --------------------------------------------------------------------------------------
      058da1ded3e760fc871bad52c0aa36378097a444b8ccca761b7d420873d1c7a5     0        10000000000 lovelace + TxOutDatumNone      
    </pre>
    <p>Now we can see the transaction hash, transaction index and the amount in loveloace (1 ADA = 1000000 lovelace).
      We can see that we have 10000 ADA in the address that we generated.
    </p>
    <p>Now we want to send some ADA in our address to some other address. So lets create another address. For that we do
      what we did above again.</p>
    <pre>
      cardano-cli address key-gen \
        --verification-key-file payment2.vkey \
        --signing-key-file payment2.skey

      cardano-cli address build \
        --payment-verification-key-file payment2.vkey \ 
        --out-file payment2.addr \
        --testnet-magic 1
    </pre>
    <p>Now our current folder looks like this.</p>
    <pre>
      .
      ├── payment1.addr
      ├── payment1.skey
      ├── payment1.vkey
      ├── payment2.addr
      ├── payment2.skey
      └── payment2.vkey
    </pre>
    <p>Now we want to send 100 ADA from address 1 to address 2. For that we need to first get the protocol parameters
      that are used to calculate the fee.</p>
    <pre>
      cardano-cli query protocol-parameters \
        --testnet-magic 1 \
        --out-file protocol.json
    </pre>
    <p>This would put the protocol parametes into the <em>protocol.json</em> file.</p>
    <p>Lets once again get the transaction hash and index of the utxo to spend.</p>
    <pre>
      cardano-cli query utxo \
        --address $(cat payment1.addr) \
        --testnet-magic 1
    </pre>
    <p>This will produce a result like this.</p>
    <pre>
      TxHash                                                             TxIx       Amount
      --------------------------------------------------------------------------------------
      058da1ded3e760fc871bad52c0aa36378097a444b8ccca761b7d420873d1c7a5     0        10000000000 lovelace + TxOutDatumNone      
    </pre>
    <p>First we create a draft and save it in <em>tx.draft</em>.</p>
    <pre>
      cardano-cli transaction build-raw \
        --tx-in 058da1ded3e760fc871bad52c0aa36378097a444b8ccca761b7d420873d1c7a5#0 \
        --tx-out $(cat payment2.addr)+0 \
        --tx-out $(cat payment1.addr)+0 \
        --fee 0 \
        --out-file tx.draft
    </pre>
    <p>For <em>--tx-in</em> we use the following syntax: <em>TxHash#TxIx</em> where <em>TxHash</em> is the transaction
      hash and <em>TxIx</em> is the index. For <em>--tx-out</em> we use: <em>TxOut+Lovelace</em> where <em>TxOut</em> is
      the hex encoded address followed by the amount in <em>Lovelace</em>. For the transaction draft <em>--tx-out</em>
      and <em>--fee</em> can be set to zero.</p>






  </div>
</body>

</html>